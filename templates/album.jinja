{% extends 'layout.html' %}

{% block navbar %}
  <nav>
        <ul class="flex border-b mt-5 text-xl">
            <li class="mr-1 ml-10">
              <a class="bg-white inline-block py-2 px-4 text-blue-500 hover:text-blue-800 font-semibold" href="/">Chinook</a>
            </li>
            <li class="mr-1">
              <a class="bg-white inline-block py-2 px-4 text-blue-500 hover:text-blue-800 font-semibold" href="/artistes">Artistes</a>
            </li>
            <li class="-mb-px mr-1">
              <a class="bg-white inline-block border-l border-t border-r rounded-t py-2 px-4 text-blue-700 font-semibold" href="/albums">Albums</a>
            </li>
            <li class="mr-1">
              <a class="bg-white inline-block py-2 px-4 text-gray-400 font-semibold" href="#">Panier</a>
            </li>
        </ul>
    </nav>
{% endblock %}

{% block entete %}
  <div class="flex justify-center mb-10">
    <i>{{ nomAlbum }}</i> <br> de {{ nomArtiste }}
  </div>
{% endblock %}

{% block contenu %}
    <script>
      valeur = 0
      function calc(idCheckbox) {
        checkbox = document.getElementById(idCheckbox)
        if (checkbox.checked) 
        {
          valeur += parseFloat(checkbox.value)
          valeur = Math.round(valeur*100)/100;
          document.getElementById("prixTotal").innerHTML = '<b>Prix du panier :' + valeur +'</b>';
        } else {
          valeur -= parseFloat(checkbox.value)
          valeur = Math.round(valeur*100)/100;
          document.getElementById("prixTotal").innerHTML = '<b>Prix du panier :' + valeur +'</b>';
        }
      }
    </script>

    <p>Albums' tracks B)</p>
    <p id='prixTotal'></p>
    <form action="./commande" method="POST">
      <fieldset>
        {% for track in tracks %}
          <div>
            <input type="checkbox" id="{{ track['Name'] }}" name="{{ track['Name'] }}" value="{{ track['UnitPrice'] }}" onclick="calc(this.id);">
            <label for="{{ track['Name'] }}"> {{ track['Name'] }}  | {{ track['MilliSeconds']//3600//60 }}m{{ track['MilliSeconds']//3600%60 }}s |Â {{ track['UnitPrice'] }}$USD </label>
          </div>
        {% endfor %}
        <button type="submit">Acheter</button>
      </fieldset>
      </form>
{% endblock %}